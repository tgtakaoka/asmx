# this tests the various assemblers against pre-assembled instruction lists
# in the ref sub-directory

rm -f *.asm.hex
rm -f *.asm.lst

function testit()
{
   echo ""
   echo "Testing $1:"

   ../src/asmx -l -o -w -e -C $1 $1.asm >/dev/null 2>&1

   diff -q $1.asm.hex ref/$1.asm.hex

   if [ $? -ne 0 ]; then
        echo "*** $1 test failed ***"
   else
        echo "--- $1 test passed ---"
   fi
}

testit 65c02
testit 68hc11
testit 68hc16
testit 68k
testit 1802
testit 6303
testit 6502
testit 6502u
testit 6800
testit 6801
testit 6809
testit 8051
testit 8085

echo ""

rm -f *.asm.hex
rm -f *.asm.lst
